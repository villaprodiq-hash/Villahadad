# ๐ ุฏููู ุงููุธุงู ุงูุชููู - ุณุชูุฏูู ูููุง ุญุฏุงุฏ (Villa Haddad System v2.5)

## ๐๏ธ ุงููููููุฉ ุงูุนุงูุฉ (System Architecture)

ูุนุชูุฏ ุงููุธุงู ุนูู **ูููููุฉ ูุฌููุฉ (Hybrid Architecture)** ุชุฌูุน ุจูู ุณุฑุนุฉ ุงูุณุญุงุจุฉ (Cloud) ูุฃูุงู ุงูุชุฎุฒูู ุงููุญูู (Local NAS).

### 1. ุงูููููุงุช ุงูุฃุณุงุณูุฉ (Core Components)

- **ุงููุงุฌูุฉ (Frontend):** ูุจููุฉ ุจู `React` + `Vite` + `TailwindCSS`. ุชุนูู ุฏุงุฎู ุญุงููุฉ `Electron`.
- **ุงูููุงุฉ (Electron Main Process):** ูุฏูุฑ ูููุงุช ุงููุธุงูุ ุงูุทุงุจุนุงุชุ ูุงูุงุชุตุงู ุจุงูุดุจูุฉ ุงููุญููุฉ (SMB/NAS).
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช (Cloud Database):** `Supabase (PostgreSQL)` ูุชุฎุฒูู ุงููุตูุตุ ุงูุญุฌูุฒุงุชุ ุงููุณุชุฎุฏูููุ ูุงูุณุฌูุงุช.
- **ุชุฎุฒูู ุงูููุฏูุง (Media Storage):** `Synology NAS` ูุชุฎุฒูู ุงูุตูุฑ ูุงูููุฏูููุงุช ุงูุซูููุฉ ูุญููุงู ูุถูุงู ุงูุณุฑุนุฉ ูุงูุฎุตูุตูุฉ.

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

### ุฃูู ุชุฐูุจ ุงูุจูุงูุงุชุ

1.  **ุจูุงูุงุช ุงูุญุฌูุฒุงุช (Booking Info):** (ุงูุงุณูุ ุงููุงุชูุ ููุน ุงูุฌูุณุฉุ ุงูุญุงูุฉุ ุงูุฏูุนุงุช) -> **Supabase Cloud**.
    - _ุงูุณุจุจ:_ ูุถูุงู ุฃู ูุฑู ุงููุฏูุฑ ูููุธู ุงูุงุณุชูุจุงู ูุงููุญุฑุฑ ููุณ ุงูุจูุงูุงุช ูู ููุณ ุงููุญุธุฉ ูู ุฃู ุฌูุงุฒ.
2.  **ูููุงุช ุงูุตูุฑ ูุงูููุฏูู (Media Files):** (ูููุงุช RAWุ JPGุ MP4) -> **Local NAS**.
    - _ุงูุณุจุจ:_ ูููุงุช ุงููุงููุฑุงุช ุถุฎูุฉ (GP/TB)ุ ุฑูุนูุง ููุณุญุงุจุฉ ุจุทูุก ููููู. ุงููุธุงู ููุดุฆ ุงููุฌูุฏุงุช ูุจุงุดุฑุฉ ุนูู ุงูุณูุฑูุฑ ุงููุญูู.

### ุณููุงุฑูู ุนููู (Workflow)

1.  **ุงูุงุณุชูุจุงู (Reception):** ููุดุฆ ุญุฌุฒ ุฌุฏูุฏ -> ูุชู ุญูุธู ูู `Supabase`.
2.  **ุงููุธุงู (System):** ููุฑุฃ ุญุงูุฉ ุงูุญุฌุฒ. ุฅุฐุง ูุงูุช ุงูุญุงูุฉ "ุชุตููุฑ"ุ ูููู `Electron` ุจุฅูุดุงุก ูุฌูุฏ ูู ุงูู NAS ุชููุงุฆูุงู ุจุงุณู ุงูุนููู ูุงูุชุงุฑูุฎ.
3.  **ุงููุตูุฑ (Photographer):** ูุฑู ุงูุญุฌุฒ ูู "ูุงุฆูุฉ ุงูููู"ุ ููููู ุจุฑูุน ุงูุตูุฑ. ุงูุตูุฑ ุชุฐูุจ ูููุฌูุฏ ูู ุงูู NAS.
4.  **ุงููุญุฑุฑ (Editor):** ููุชุญ "ููู ุงูุนููู". ุงููุธุงู ูุฌูุจ ุงูุจูุงูุงุช ูู Supabaseุ ูููุฑุฃ ุงูุตูุฑ ูู ุงูู NAS.

---

## ๐ ูุธุงู ุงูุฃูุงู ูุงูุฏุฎูู (Security & Auth)

### 1. ุงููุตุงุฏูุฉ ุงููุฌููุฉ (Hybrid Auth)

- **ุงููุณุชุฎุฏููู (Users):** ูุฎุฒููู ูู `Supabase Auth` (ุณุญุงุจู).
- **ุชุณุฌูู ุงูุฏุฎูู (Login):**
  - ูุชู ุงูุชุญูู ูู ุงูู PIN ุฃู ูููุฉ ุงููุฑูุฑ ุนุจุฑ Supabase.
  - ูุชู ุญูุธ "ุฌูุณุฉ" (Session) ูุดูุฑุฉ ูุญููุงู.

### 2. ุงูุจุตูุฉ (Biometrics - Touch ID)

- **ููู ุชุนููุ** ูุง ูุฑุณู ุงูุจุตูุฉ ููุณูุฑูุฑ (ููุญูุงุธ ุนูู ุงูุฎุตูุตูุฉ).
- **ุงูุขููุฉ:**
  1.  ูููู ุงููุณุชุฎุฏู ุจุชูุนูู ุงูุจุตูุฉ ูู ุงูุฅุนุฏุงุฏุงุช -> ูุชู ุญูุธ "ููุชุงุญ ุชูุนูู" ูู `localStorage` ููุฐุง ุงูุฌูุงุฒ ููุท.
  2.  ุนูุฏ ุงูุฏุฎููุ ูุชุญูู ุงููุธุงู ูู ูุฌูุฏ ุงูููุชุงุญ.
  3.  ูุทูุจ ูู `macOS` ุงูุชุญูู ูู ุงูุจุตูุฉ.
  4.  ุฅุฐุง ูุงูู `macOS` (Success)ุ ูููู ุงูุชุทุจูู ุจุชุณุฌูู ุงูุฏุฎูู ุชููุงุฆูุงู ุฏูู ุงูุญุงุฌุฉ ููููุฉ ุงููุฑูุฑ.

---

## ๐๏ธ ุงูุฅูุฌุงุฒุงุช ูุงููููุฒุงุช ุงููุถุงูุฉ (What we built)

### 1. ูุธุงู ุงูุฏุฎูู ุงูููุญุฏ (Unified Login)

- ูุงุฌูุฉ ุฏุฎูู ุจุชุตููู "Netflix Style" ูุน ุฃูุงุชุงุฑ ููู ููุธู.
- ุฏุนู ุชุณุฌูู ุงูุฏุฎูู ุจู PIN (ููุณุฑุนุฉ) ุฃู ูููุฉ ูุฑูุฑ.
- **ุฌุฏูุฏ:** ุฏุนู ูุงูู ููุจุตูุฉ (Touch ID) ูุน ุฒุฑ "ุฏุฎูู ุณุฑูุน".

### 2. ุฅุฏุงุฑุฉ ุงูููุธููู ูุงูุตูุงุญูุงุช (RBAC)

- **ุงููุฏูุฑ (Manager):** ุชุญูู ูุงูู + ุงุทูุงุน ุนูู ุงูุณุฌูุงุช (Audit Logs) + ุชูุงุฑูุฑ ูุงููุฉ.
- **ุงูุงุณุชูุจุงู (Reception):** ุฅูุดุงุก ุญุฌูุฒุงุช + ุฅุฏุงุฑุฉ ุงูุนููุงุก.
- **ุงููุญุฑุฑูู (Editors):** ูุงุฌูุฉ ูุฎุตุตุฉ ูุฑุคูุฉ ุงูููุงู ุงููุณูุฏุฉ ููุท (ุตูุฑ/ููุฏูู).
- **ุงูุทุงุจุนุงุช (Printers):** ูุงุฌูุฉ ูุฎุตุตุฉ ูุทูุจุงุช ุงูุทุจุงุนุฉ.

### 3. ุงูุฑุจุท ูุน NAS (Smart Sync)

- ุงููุธุงู ูุชุญูู ุชููุงุฆูุงู ูู ุงุชุตุงู ุงูุณูุฑูุฑ ุงููุญูู.
- ูุธูุฑ ุญุงูุฉ ุงูุงุชุตุงู (Online/Offline) ูู ุงูุดุฑูุท ุงูุนููู.
- ุฅูุดุงุก ุงููุฌูุฏุงุช ูุชุณููุชูุง ูุชู ุฃูุชููุงุชูููุงู ูุชูููู ุงูุฃุฎุทุงุก ุงูุจุดุฑูุฉ.

### 4. ูุถุน ุงูุงูููุงูู (Offline Mode / Resilience)

- ุญุชู ูู ุงููุทุน ุงููุชุ ุงูุชุทุจูู ูุญุชูุธ ุจุจูุงูุงุช ุงูุฌูุณุฉ ุงูุญุงููุฉ ููุง ูุฎุฑุฌ ุงููุณุชุฎุฏู (ุจูุถู ุงูุชุฎุฒูู ุงููุญูู ููุฅุนุฏุงุฏุงุช).

---

## ๐งน ุตูุงูุฉ ุงููุธุงู (Maintenance)

- **ุชูุธูู ุงูุจูุงูุงุช:** ููุฌุฏ ุณูุฑุจุช `reset_business_data.sql` ูู ูุฌูุฏ `scripts`. ุชุดุบููู ูู Supabase ููุณุญ ูู ุงูุญุฌูุฒุงุช ูุงูุณุฌูุงุช ููุจูู ุนูู ุญุณุงุจุงุช ุงูููุธููู (ูุชุณููู ุงููุธุงู ูุธููุงู).
