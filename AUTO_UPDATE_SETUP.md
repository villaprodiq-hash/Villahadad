# ๐ ุฅุนุฏุงุฏ ูุธุงู ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ

## โ ุงููุถุน ุงูุญุงูู

ุงูุชุทุจูู **ูุญุชูู ุจุงููุนู** ุนูู ูุธุงู ุชุญุฏูุซุงุช ุชููุงุฆู ูุฏูุฌ ุจุงุณุชุฎุฏุงู `electron-updater`. ุงููุธุงู ุฌุงูุฒ ููุญุชุงุฌ ููุท ุฅุนุฏุงุฏ ุงูุฎุงุฏู.

## ููู ูุนูู ุงููุธุงู

1. **ุนูุฏ ูุชุญ ุงูุชุทุจูู** - ูุชุญูู ุชููุงุฆูุงู ูู ูุฌูุฏ ุชุญุฏูุซุงุช (ุจุนุฏ 5 ุซูุงูู)
2. **ูู ุณุงุนุฉ** - ูุชุญูู ูุฑุฉ ุฃุฎุฑู ูู ุงูุชุญุฏูุซุงุช
3. **ุนูุฏ ูุฌูุฏ ุชุญุฏูุซ** - ูุนุฑุถ notification ูููุณุชุฎุฏู
4. **ุงูุชูุฒูู** - ูุญููู ุงูุชุญุฏูุซ ูู ุงูุฎูููุฉ
5. **ุงูุชุซุจูุช** - ุงููุณุชุฎุฏู ูุถุบุท "Restart" ูุชุซุจูุช ุงูุชุญุฏูุซ

---

## ุฎูุงุฑุงุช ุงูุฅุนุฏุงุฏ

ูุฏูู ุฎูุงุฑุงู ูุงุณุชุถุงูุฉ ุงูุชุญุฏูุซุงุช:

### ุงูุฎูุงุฑ 1: GitHub Releases (ููุตู ุจู - ูุฌุงูู ูุณูู)

#### ุงููููุฒุงุช
- โ ูุฌุงูู ุชูุงูุงู
- โ ุณูู ุงูุฅุนุฏุงุฏ
- โ ููุซูู ูุณุฑูุน
- โ ุชุงุฑูุฎ ูุงูู ููุฅุตุฏุงุฑุงุช

#### ุงูุฎุทูุงุช

**1. ุฅูุดุงุก GitHub Repository**
```bash
# ูู ูุฌูุฏ ุงููุดุฑูุน
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/villahadad-v2.git
git push -u origin main
```

**2. ุชุนุฏูู electron-builder.cjs**
```javascript
// ุงุณุชุจุฏู publish section ุจูุฐุง ุงูููุฏ:
publish: {
  provider: "github",
  owner: "YOUR_GITHUB_USERNAME",  // ุงุณู ุญุณุงุจู ูู GitHub
  repo: "villahadad-v2"            // ุงุณู ุงูุฑูุจู
}
```

**3. ุฅูุดุงุก GitHub Personal Access Token**
- ุงุฐูุจ ุฅูู: https://github.com/settings/tokens
- ุงุถุบุท "Generate new token (classic)"
- ุงุฎุชุฑ: `repo` (Full control of private repositories)
- ุงูุณุฎ ุงูู Token

**4. ุฅุถุงูุฉ Token ูููุดุฑูุน**
```bash
# ูู ููู .env
GH_TOKEN=ghp_YOUR_GITHUB_TOKEN_HERE
```

**5. ุจูุงุก ููุดุฑ ุงูุชุทุจูู**
```bash
# ุจูุงุก ุงูุชุทุจูู
npm run build:manager  # ุฃู reception/admin/etc.

# ุณูุชู ุฑูุน ุงููููุงุช ุชููุงุฆูุงู ุฅูู GitHub Releases
```

**6. ุฅูุดุงุก Release ูู GitHub**
- ุงุฐูุจ ุฅูู: https://github.com/YOUR_USERNAME/villahadad-v2/releases
- ุงุถุบุท "Create a new release"
- Tag version: `v1.0.4`
- Title: `Villa Hadad v1.0.4`
- ุงุฑูุน ุงููููุงุช ูู `release/manager/` (ุฃู ุงูููุน ุงูููุงุณุจ):
  - `VH Manager-1.0.4-mac.zip`
  - `VH Manager-1.0.4.dmg`
  - `latest-mac.yml` (ููู ุฌุฏุงู!)

---

### ุงูุฎูุงุฑ 2: Synology NAS (ุฎุงุต - ุชุญุชุงุฌ ุฎุงุฏู)

#### ุงููููุฒุงุช
- โ ุชุญูู ูุงูู
- โ ูุง ูุญุชุงุฌ ุญุณุงุจ GitHub
- โ๏ธ ูุญุชุงุฌ ุฎุงุฏู ููุจ

#### ุงูุฎุทูุงุช

**1. ุฅุนุฏุงุฏ ูุฌูุฏ ูู Synology**
```
/volume1/web/updates/
  โโโ mac/
  โ   โโโ VH Manager-1.0.4-mac.zip
  โ   โโโ latest-mac.yml
  โ   โโโ ...
  โโโ ...
```

**2. ุชูุนูู Web Station ูู Synology**
- ุงูุชุญ DSM โ Web Station
- ูุนูู HTTP Server
- ุงุฌุนู ุงููุฌูุฏ `/web/updates` accessible

**3. ุฅุถุงูุฉ URL ูู .env**
```bash
UPDATE_SERVER_URL=http://YOUR_SYNOLOGY_IP:PORT/updates/mac
```

**4. ุจูุงุก ุงูุชุทุจูู**
```bash
npm run build:manager
```

**5. ุฑูุน ุงููููุงุช ููู NAS**
```bash
# ูู ูุฌูุฏ release/manager/
# ุงุฑูุน ูู ุงููููุงุช ุฅูู /volume1/web/updates/mac/
```

---

## ููู latest-mac.yml

ูุฐุง ุงูููู **ุถุฑูุฑู ุฌุฏุงู** ูุนูู ุงูุชุญุฏูุซุงุช. ูุชู ุฅูุดุงุคู ุชููุงุฆูุงู ุนูุฏ ุงูุจูุงุก. ูุซุงู:

```yaml
version: 1.0.4
files:
  - url: VH Manager-1.0.4-mac.zip
    sha512: ABC123...
    size: 45678901
path: VH Manager-1.0.4-mac.zip
sha512: ABC123...
releaseDate: '2026-01-20T12:00:00.000Z'
```

**ููู:** ุงุญุฑุต ุนูู ุฑูุน `latest-mac.yml` ูุน ูู ุชุญุฏูุซ!

---

## ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซุงุช

### 1. ุชุซุจูุช ุงููุณุฎุฉ ุงููุฏููุฉ
```bash
# ุบููุฑ VERSION ูู package.json ุฅูู 1.0.3
npm run build:manager
# ุซุจูุช ุงูุชุทุจูู ูู release/manager/VH Manager-1.0.3.dmg
```

### 2. ูุดุฑ ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ
```bash
# ุงุฑุฌุน VERSION ุฅูู 1.0.4
npm run build:manager
# ุงุฑูุน ุงููููุงุช ููุฎุงุฏู
```

### 3. ุงูุชุญ ุงูุชุทุจูู (v1.0.3)
- ุงูุชุธุฑ 5 ุซูุงูู
- ูุฌุจ ุฃู ูุธูุฑ notification: "ุชุญุฏูุซ ุฌุฏูุฏ ูุชููุฑ v1.0.4"
- ุงุถุบุท "ุชุญุฏูุซ ุงูุขู"
- ุงูุชุทุจูู ุณูุญูู ุงูุชุญุฏูุซ ุซู ูุทูุจ ุฅุนุงุฏุฉ ุงูุชุดุบูู

---

## ูุดุงูู ุดุงุฆุนุฉ

### 1. "Update check failed"
**ุงูุฃุณุจุงุจ:**
- โ ููู `latest-mac.yml` ุบูุฑ ููุฌูุฏ
- โ UPDATE_SERVER_URL ุฎุงุทุฆ
- โ ุงูุฎุงุฏู ุบูุฑ ูุชุงุญ

**ุงูุญู:**
- ุชุญูู ูู URL ูู ุงููุชุตูุญ
- ุชุฃูุฏ ูู ุฑูุน `latest-mac.yml`

### 2. "Update downloaded but won't install"
**ุงูุฃุณุจุงุจ:**
- โ ุงูุชุทุจูู ุบูุฑ ููููุน (unsigned)
- โ Code signing certificates ุบูุฑ ุตุญูุญุฉ

**ุงูุญู:**
- ููุงุฎุชุจุงุฑ: ุงูุชุญ System Preferences โ Security โ Allow
- ููุฅูุชุงุฌ: ูููุน ุงูุชุทุจูู ุจู Apple Developer Certificate

### 3. "No updates available" (ููู ูู ุชุญุฏูุซ)
**ุงูุฃุณุจุงุจ:**
- โ VERSION ูู `package.json` ููุณ ุงููุณุฎุฉ ุงููุซุจุชุฉ
- โ latest-mac.yml ูุฏูู

**ุงูุญู:**
- ุชุฃูุฏ ูู VERSION ุฃูุจุฑ ูู ุงููุซุจุช
- ุงุญุฐู cache: `~/Library/Application Support/VH Manager/`

---

## ูุตุงุฆุญ ููุฅูุชุงุฌ

### 1. Versioning
ุงุณุชุฎุฏู [Semantic Versioning](https://semver.org/):
```
MAJOR.MINOR.PATCH
1.0.4 โ 1.0.5 (bug fix)
1.0.5 โ 1.1.0 (new feature)
1.1.0 โ 2.0.0 (breaking change)
```

### 2. Release Notes
ุฃุถู ููุงุญุธุงุช ุงูุฅุตุฏุงุฑ ูู GitHub Release ุฃู ูู ููู `CHANGELOG.md`:
```markdown
## v1.0.5 - 2026-01-21
### Fixed
- ูุดููุฉ ุชุนููู ุงูุชุทุจูู ุนูุฏ ุฅุถุงูุฉ ููุธู
- ูุดููุฉ ุงููุฒุงููุฉ ูุน Supabase

### Added
- ูุธุงู ุชุญุฏูุซุงุช ุชููุงุฆู
```

### 3. Testing
- **ุงุฎุชุจุฑ ุฏุงุฆูุงู** ุงูุชุญุฏูุซุงุช ูุจู ูุดุฑูุง ููุนููุงุก
- ุฌููุฒ ูุณุฎุฉ `beta` ููุงุฎุชุจุงุฑ
- ุงุณุชุฎุฏู `channel: "beta"` ูู electron-builder

### 4. Backup
ูุจู ูู ุชุญุฏูุซุ ุฐููุฑ ุงููุณุชุฎุฏููู ุจุนูู backup ููุจูุงูุงุช:
```javascript
// ูู UpdateNotification.tsx
toast.warning('ูููุตุญ ุจุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุญุฏูุซ');
```

---

## ุงูุฎุทูุงุช ุงููุงุฏูุฉ

- [ ] ุงุฎุชุฑ ุฎูุงุฑ ุงุณุชุถุงูุฉ (GitHub ุฃู Synology)
- [ ] ุฃุนุฏ ุฅุนุฏุงุฏ `electron-builder.cjs` ุญุณุจ ุงุฎุชูุงุฑู
- [ ] ุฃุถู `GH_TOKEN` ุฃู `UPDATE_SERVER_URL` ูู `.env`
- [ ] ุงุจูู ุงูุชุทุจูู ูุงุฎุชุจุฑ ุงูุชุญุฏูุซุงุช
- [ ] ูุซูู ุนูููุฉ ุงููุดุฑ ูููุฑูู

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 2026
**ุงููุณุฎุฉ:** 1.0.4
