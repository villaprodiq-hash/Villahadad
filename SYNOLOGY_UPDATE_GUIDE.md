# ๐ ุฏููู ุฅุนุฏุงุฏ ุงูุชุญุฏูุซุงุช ุนุจุฑ Synology NAS

## โ ุงูุฅุนุฏุงุฏ ุงููุทููุจ

**Synology NAS IP:** `192.168.68.120`
**ูุฌูุฏ ุงูุชุญุฏูุซุงุช:** `/web/update`
**URL ุงููุงูู:** `http://192.168.68.120/update`

---

## ๐ ุงูุฎุทูุงุช

### 1๏ธโฃ ุฅุนุฏุงุฏ Synology NAS

#### ุชูุนูู Web Station
1. ุงูุชุญ **DSM** (Synology DiskStation Manager)
2. ุงุฐูุจ ุฅูู **Package Center**
3. ุซุจูุช **Web Station** (ุฅุฐุง ูู ููู ูุซุจุชุงู)
4. ุงูุชุญ **Web Station**
5. ุชุฃูุฏ ูู ุชูุนูู **HTTP Server**

#### ุฅูุดุงุก ูุฌูุฏ ุงูุชุญุฏูุซุงุช
```bash
# ุงููุณุงุฑ ุงููุงูู ูู Synology:
/volume1/web/update/

# ุงููููู ุงููุทููุจ:
/volume1/web/update/
โโโ VH Manager-1.0.4-mac.zip          # ุงูุชุทุจูู ุงููุถุบูุท
โโโ VH Manager-1.0.4.dmg              # DMG (ุงุฎุชูุงุฑู)
โโโ VH Manager-1.0.4.dmg.blockmap     # Blockmap ููุชุญุฏูุซุงุช ุงูุณุฑูุนุฉ
โโโ latest-mac.yml                     # ููู ุงูุชุญุฏูุซุงุช (ููู ุฌุฏุงู!)
```

#### ุตูุงุญูุงุช ุงููุตูู
1. ุงูุชุญ **Control Panel** โ **Shared Folder**
2. ุงุฎุชุฑ ูุฌูุฏ `web`
3. ุชุฃูุฏ ูู ุฃู:
   - โ Guest: Read only (ุนูู ุงูุฃูู)
   - โ HTTP/HTTPS: Enabled

---

### 2๏ธโฃ ุจูุงุก ุงูุชุทุจูู ูุฑูุนู ููู NAS

#### ุงูุฎุทูุฉ 1: ุจูุงุก ุงูุชุทุจูู
```bash
# ูู ูุฌูุฏ ุงููุดุฑูุน
cd /Users/mohamedaljaff/Desktop/villahadad

# ุจูุงุก ุงูุชุทุจูู (ูุซุงู: Manager)
npm run build:manager

# ุงููููุงุช ุณุชููู ูู:
# release/manager/
```

#### ุงูุฎุทูุฉ 2: ุฑูุน ุงููููุงุช ููู NAS

**ุงูุทุฑููุฉ 1: ุนุจุฑ Finder (macOS)**
```bash
# 1. ุงูุชุญ Finder
# 2. ุงุถุบุท Cmd+K
# 3. Server Address: smb://192.168.68.120
# 4. Login ุจุญุณุงุจู
# 5. ุงูุชุญ ูุฌูุฏ web/update/
# 6. ุงูุณุฎ ุงููููุงุช ูู release/manager/
```

**ุงูุทุฑููุฉ 2: ุนุจุฑ Terminal (ุฃุณุฑุน)**
```bash
# ูู ูุฌูุฏ ุงููุดุฑูุน
cd release/manager

# ุฑูุน ุงููููุงุช (ุงุณุชุจุฏู USERNAME ุจุญุณุงุจู)
scp -r *.{zip,yml,dmg,blockmap} USERNAME@192.168.68.120:/volume1/web/update/

# ุฃู ุงุณุชุฎุฏู rsync (ุฃูุถู):
rsync -avz --progress \
  *.zip *.yml *.dmg *.blockmap \
  USERNAME@192.168.68.120:/volume1/web/update/
```

**ุงูุทุฑููุฉ 3: Script ุชููุงุฆู**

ุฃูุดุฆ ููู `upload-to-nas.sh`:
```bash
#!/bin/bash
# upload-to-nas.sh

# Configuration
NAS_IP="192.168.68.120"
NAS_USER="admin"  # ุบููุฑ ูุฐุง ูุญุณุงุจู
NAS_PATH="/volume1/web/update"
APP_TYPE="manager"  # manager, reception, admin, etc.

# Build the app
echo "๐จ Building app..."
npm run build:$APP_TYPE

# Navigate to release folder
cd release/$APP_TYPE

# Upload files
echo "๐ค Uploading to NAS..."
scp -r *.zip *.yml *.dmg *.blockmap $NAS_USER@$NAS_IP:$NAS_PATH/

echo "โ Upload complete!"
echo "๐ Update URL: http://$NAS_IP/update"
```

ุงุณุชุฎุฏุงูู:
```bash
chmod +x upload-to-nas.sh
./upload-to-nas.sh
```

---

### 3๏ธโฃ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

#### ุงุฎุชุจุงุฑ ุงููุตูู ูููููุงุช
ุงูุชุญ ุงููุชุตูุญ ูุฌุฑุจ ูุฐู ุงูุฑูุงุจุท:

1. **ููู ุงูุชุญุฏูุซุงุช (ููู!):**
   ```
   http://192.168.68.120/update/latest-mac.yml
   ```
   ูุฌุจ ุฃู ูุธูุฑ ูุญุชูู ูุซู:
   ```yaml
   version: 1.0.4
   files:
     - url: VH Manager-1.0.4-mac.zip
       sha512: ABC123...
       size: 45678901
   path: VH Manager-1.0.4-mac.zip
   ```

2. **ููู ุงูุชุทุจูู:**
   ```
   http://192.168.68.120/update/VH Manager-1.0.4-mac.zip
   ```
   ูุฌุจ ุฃู ูุจุฏุฃ ุงูุชุญููู

#### ุฅุฐุง ูู ุชุธูุฑ ุงููููุงุช:
- โ ุชุญูู ูู ุตูุงุญูุงุช ุงููุฌูุฏ ูู Synology
- โ ุชุฃูุฏ ูู ุชูุนูู HTTP ูู Web Station
- โ ุฌุฑุจ ุงููุตูู ูู ุฌูุงุฒ ุขุฎุฑ ูู ููุณ ุงูุดุจูุฉ

---

### 4๏ธโฃ ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซุงุช

#### ุงูุฎุทูุฉ 1: ุชุซุจูุช ูุณุฎุฉ ูุฏููุฉ
```bash
# 1. ุบููุฑ VERSION ูู package.json
"version": "1.0.3"

# 2. ุงุจูู ุงูุชุทุจูู
npm run build:manager

# 3. ุซุจูุช ุงูุชุทุจูู ูู:
release/manager/VH Manager-1.0.3.dmg
```

#### ุงูุฎุทูุฉ 2: ูุดุฑ ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ
```bash
# 1. ุงุฑุฌุน VERSION ุฅูู 1.0.4 (ุฃู ุฃุนูู)
"version": "1.0.4"

# 2. ุงุจูู ุงูุชุทุจูู
npm run build:manager

# 3. ุงุฑูุน ุงููููุงุช ููู NAS
./upload-to-nas.sh
```

#### ุงูุฎุทูุฉ 3: ุงูุชุญ ุงูุชุทุจูู (v1.0.3)
1. ุดุบูู ุงูุชุทุจูู ุงููุซุจุช (ุงููุณุฎุฉ ุงููุฏููุฉ)
2. ุงูุชุธุฑ **5 ุซูุงูู**
3. ูุฌุจ ุฃู ุชุธูุฑ notification:
   ```
   ๐ ุชุญุฏูุซ ุฌุฏูุฏ ูุชููุฑ
   ุงููุณุฎุฉ 1.0.4 ุฌุงูุฒุฉ ููุชุซุจูุช
   [ุชุญุฏูุซ ุงูุขู] [ูุงุญูุงู]
   ```
4. ุงุถุบ "ุชุญุฏูุซ ุงูุขู"
5. ุงูุชุทุจูู ุณูุญูู ุงูุชุญุฏูุซ (ูุธูุฑ progress bar)
6. ุจุนุฏ ุงูุชูุงู ุงูุชุญููู: "ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุขู"
7. ุงูุชุทุจูู ุณููุนูุฏ ุงูุชุดุบูู ุจุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ โ

---

## ๐ง Troubleshooting

### ูุดููุฉ: "No updates available"
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- โ VERSION ูู package.json ููุณ ุงููุณุฎุฉ ุงููุซุจุชุฉ
- โ ููู `latest-mac.yml` ุบูุฑ ููุฌูุฏ ุฃู ูุฏูู
- โ URL ุฎุงุทุฆ ูู electron-builder.cjs

**ุงูุญู:**
```bash
# 1. ุชุญูู ูู URL
curl http://192.168.68.120/update/latest-mac.yml

# 2. ุชุญูู ูู VERSION
cat package.json | grep version

# 3. ุงูุณุญ cache ุงูุชุทุจูู
rm -rf ~/Library/Application\ Support/VH\ Manager/
```

---

### ูุดููุฉ: "Update check failed"
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- โ ุงูู NAS ูุทูู ุฃู ุบูุฑ ูุชุตู ุจุงูุดุจูุฉ
- โ Web Station ูุทูู
- โ Firewall ูููุน ุงููุตูู

**ุงูุญู:**
```bash
# ุชุญูู ูู ุงุชุตุงู NAS
ping 192.168.68.120

# ุชุญูู ูู HTTP Server
curl -I http://192.168.68.120/update/

# ุฅุฐุง ุธูุฑ 404 ุฃู 403:
# โ ุชุญูู ูู ุตูุงุญูุงุช ุงููุฌูุฏ ูู Synology
```

---

### ูุดููุฉ: "Update downloads but won't install"
**ุงูุฃุณุจุงุจ:**
- โ ุงูุชุทุจูู ุบูุฑ ููููุน (unsigned)
- โ ููู .blockmap ุบูุฑ ููุฌูุฏ

**ุงูุญู:**
```bash
# 1. ุชุฃูุฏ ูู ุฑูุน ุฌููุน ุงููููุงุช:
ls -lh /volume1/web/update/
# ูุฌุจ ุฃู ุชุฑู:
# - *.zip
# - *.yml
# - *.dmg (optional)
# - *.blockmap

# 2. ููุงุฎุชุจุงุฑ ููุท - ุงูุณูุงุญ ุจุงูุชุทุจููุงุช ุบูุฑ ุงููููุนุฉ:
# System Preferences โ Security โ Allow "VH Manager"
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุฃูุงู
- โ๏ธ **HTTP ููุท** - ููุดุจูุฉ ุงููุญููุฉ ููุท
- ๐ ุฅุฐุง ุชุจู ุชุณุชุฎุฏู ุงูุชุทุจูู ูู ุฎุงุฑุฌ ุงูุดุจูุฉุ ูุนูู HTTPS ูู Synology

### 2. ุญุฌู ุงูุชุญุฏูุซุงุช
- ุงุณุชุฎุฏู **.zip** ุจุฏู **.dmg** ููุชุญุฏูุซุงุช (ุฃุตุบุฑ ุญุฌูุงู)
- ููู **.blockmap** ูุฎูู ุงูุชุญุฏูุซุงุช ุฃุณุฑุน (Delta Updates)

### 3. ุฅุฏุงุฑุฉ ุงูุฅุตุฏุงุฑุงุช
```bash
# ุงุญุชูุธ ุจูุณุฎ ูุฏููุฉ ููุฑุฌูุน ุฅูููุง:
/volume1/web/update/
โโโ latest-mac.yml              # ุฏุงุฆูุงู ูุดูุฑ ููุฃุญุฏุซ
โโโ archive/
โ   โโโ 1.0.3/
โ   โ   โโโ VH Manager-1.0.3-mac.zip
โ   โ   โโโ latest-mac.yml
โ   โโโ 1.0.4/
โ       โโโ VH Manager-1.0.4-mac.zip
โ       โโโ latest-mac.yml
โโโ VH Manager-1.0.4-mac.zip    # ุงููุณุฎุฉ ุงูุญุงููุฉ
```

---

## ๐ Workflow ุงูููุชุฑุญ

### ุนูุฏ ุฅุตุฏุงุฑ ุชุญุฏูุซ ุฌุฏูุฏ:

```bash
# 1. ุญุฏูุซ VERSION
nano package.json
# "version": "1.0.5"

# 2. ุญุฏูุซ CHANGELOG
nano CHANGELOG.md
# ## v1.0.5 - 2026-01-21
# - Fixed: ...
# - Added: ...

# 3. ุงุจูู ุงูุชุทุจูู
npm run build:manager

# 4. ุงุฑูุน ููู NAS
./upload-to-nas.sh

# 5. ุฃุฎุจุฑ ุงููุฑูู
# "ุชุญุฏูุซ ุฌุฏูุฏ ูุชููุฑ - ุณููุซุจุช ุชููุงุฆูุงู ุนูุฏ ูุชุญ ุงูุชุทุจูู"
```

---

## โ Checklist ุงูุชุณููู

ูุจู ุชุณููู ุงูุชุทุจูู ูููุฑููุ ุชุฃูุฏ ูู:

- [ ] Web Station ุดุบุงู ูู Synology
- [ ] ูุฌูุฏ `/web/update` ููุฌูุฏ ููู ุตูุงุญูุงุช
- [ ] ููู `latest-mac.yml` ููุฌูุฏ ููุนูู
- [ ] ุงุฎุชุจุฑุช ุงูุชุญุฏูุซุงุช ุนูู ุฌูุงุฒู
- [ ] UPDATE_SERVER_URL ุตุญูุญ ูู `.env`
- [ ] ูุซููุช ุนูููุฉ ุงููุดุฑ ูููุฑูู

---

**ุฌุงูุฒ ููุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ! ๐**

ุฅุฐุง ุงุญุชุฌุช ูุณุงุนุฏุฉุ ุฑุงุฌุน [AUTO_UPDATE_SETUP.md](./AUTO_UPDATE_SETUP.md) ูููุฒูุฏ ูู ุงูุชูุงุตูู.
